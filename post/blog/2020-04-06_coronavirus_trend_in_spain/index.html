<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Coronavirus Trend In Spain - MetalBlueberry - A passionate programmer</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="MetalBlueberry" /><meta name="description" content="A few graphs with the coronavirus trend" /><meta name="keywords" content="coronavirus, trends, plots, plotly" />






<meta name="generator" content="Hugo 0.59.1 with theme even" />


<link rel="canonical" href="https://metalblueberry.github.io/post/blog/2020-04-06_coronavirus_trend_in_spain/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">


<link href="/dist/even.c2a46f00.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">
<link rel="stylesheet" href="/css/style.css">


<meta property="og:title" content="Coronavirus Trend In Spain" />
<meta property="og:description" content="A few graphs with the coronavirus trend" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://metalblueberry.github.io/post/blog/2020-04-06_coronavirus_trend_in_spain/" />

<meta property="og:image" content="https://metalblueberry.github.io/me.jpeg" />
<meta property="article:published_time" content="2020-04-07T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-04-07T00:00:00+00:00" />
<meta itemprop="name" content="Coronavirus Trend In Spain">
<meta itemprop="description" content="A few graphs with the coronavirus trend">


<meta itemprop="datePublished" content="2020-04-07T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2020-04-07T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="1659">



<meta itemprop="keywords" content="coronavirus," />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://metalblueberry.github.io/me.jpeg"/>

<meta name="twitter:title" content="Coronavirus Trend In Spain"/>
<meta name="twitter:description" content="A few graphs with the coronavirus trend"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">MetalBlueberry</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">MetalBlueberry</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Coronavirus Trend In Spain</h1>
      <script src="https://cdn.plot.ly/plotly-1.50.0.min.js"></script>

      <div class="post-meta">
        <span class="post-time"> 2020-04-07 </span>
        <div class="post-category">
    <a class="blog"  href="/categories/blog/"> blog </a>
    </div>
          <span class="more-meta"> 1659 words </span>
          <span class="more-meta"> 8 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#references">References</a></li>
</ul></li>
</ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>After the video from Minute Earth about the coronavirus, I&rsquo;ve decided to plot the same data but only for Spain by province. This gives a good view of which provinces are managing to stop the virus.</p>

<p>You have to watch the video to understand the following plots.</p>


<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube-nocookie.com/embed/54XLXg4fYsc" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>


<p>Not that your understand&hellip; enjoy it.</p>

<p>You can double click on a label to Isolate it or single click to hide.</p>

<div class="figure">
<div class="figure-plot" id="local_corona">
	Code could not finish, this are some reasons why this happen.
	- Plot name not defined. The first parameter of the shortcode is the name.
	- There is a syntax error. check browser console.
</div>
<script>
  function draw(){
	test = document.getElementById("local_corona");
	if (test == null){
		console.log("The plot name is not defined")
		return
	}

	fig = null
	
fig = {"data": [{"y": [893.0, 1068.0, 1246.0, 1288.0, 1407.0, 1788.0, 2151.0, 2398.0, 2506.0, 2762.0, 2957.0, 3444.0, 3347.0, 3382.0, 3566.0, 3581.0, 3592.0, 3619.0, 3176.0, 2949.0], "x": [1008.0, 1287.0, 1515.0, 1725.0, 1961.0, 2471.0, 3010.0, 3406.0, 3793.0, 4277.0, 4682.0, 5405.0, 5818.0, 6392.0, 6972.0, 7374.0, 7869.0, 8301.0, 8581.0, 8767.0], "text": ["18/03/2020", "19/03/2020", "20/03/2020", "21/03/2020", "22/03/2020", "23/03/2020", "24/03/2020", "25/03/2020", "26/03/2020", "27/03/2020", "28/03/2020", "29/03/2020", "30/03/2020", "31/03/2020", "01/04/2020", "02/04/2020", "03/04/2020", "04/04/2020", "05/04/2020", "6/4/2020"], "name": "Andaluc\u00eda", "mode": "lines+markers"}, {"y": [835.0, 978.0, 1168.0, 1326.0, 1440.0, 1514.0, 1584.0, 1584.0, 1551.0, 1486.0, 1374.0, 1269.0, 1177.0], "x": [1116.0, 1338.0, 1592.0, 1858.0, 2078.0, 2272.0, 2491.0, 2700.0, 2889.0, 3078.0, 3232.0, 3347.0, 3449.0], "text": ["25/03/2020", "26/03/2020", "27/03/2020", "28/03/2020", "29/03/2020", "30/03/2020", "31/03/2020", "01/04/2020", "02/04/2020", "03/04/2020", "04/04/2020", "05/04/2020", "6/4/2020"], "name": "Arag\u00f3n", "mode": "lines+markers"}, {"y": [518.0, 543.0, 564.0, 574.0, 543.0, 543.0, 533.0, 518.0, 517.0, 488.0, 443.0], "x": [1004.0, 1088.0, 1158.0, 1236.0, 1322.0, 1384.0, 1433.0, 1522.0, 1605.0, 1646.0, 1679.0], "text": ["27/03/2020", "28/03/2020", "29/03/2020", "30/03/2020", "31/03/2020", "01/04/2020", "02/04/2020", "03/04/2020", "04/04/2020", "05/04/2020", "6/4/2020"], "name": "Asturias", "mode": "lines+markers"}, {"y": [677.0, 711.0, 723.0, 705.0, 723.0, 660.0, 612.0, 539.0, 497.0, 445.0, 463.0], "x": [1025.0, 1125.0, 1204.0, 1262.0, 1380.0, 1444.0, 1490.0, 1564.0, 1622.0, 1649.0, 1725.0], "text": ["27/03/2020", "28/03/2020", "29/03/2020", "30/03/2020", "31/03/2020", "01/04/2020", "02/04/2020", "03/04/2020", "04/04/2020", "05/04/2020", "6/4/2020"], "name": "Canarias", "mode": "lines+markers"}, {"y": [741.0, 753.0, 746.0, 703.0, 597.0, 511.0, 447.0, 418.0, 383.0, 330.0], "x": [1023.0, 1100.0, 1171.0, 1213.0, 1268.0, 1321.0, 1384.0, 1441.0, 1483.0, 1501.0], "text": ["28/03/2020", "29/03/2020", "30/03/2020", "31/03/2020", "01/04/2020", "02/04/2020", "03/04/2020", "04/04/2020", "05/04/2020", "6/4/2020"], "name": "Cantabria", "mode": "lines+markers"}, {"y": [1055.0, 1297.0, 1521.0, 1763.0, 2029.0, 2272.0, 2620.0, 2985.0, 3325.0, 3670.0, 3746.0, 3751.0, 3907.0, 3867.0, 3743.0, 3541.0, 3335.0, 3315.0, 3370.0], "x": [1147.0, 1466.0, 1744.0, 2055.0, 2460.0, 2940.0, 3488.0, 4132.0, 4791.0, 5414.0, 5801.0, 6211.0, 6847.0, 7355.0, 7875.0, 8332.0, 8749.0, 9116.0, 9581.0], "text": ["19/03/2020", "20/03/2020", "21/03/2020", "22/03/2020", "23/03/2020", "24/03/2020", "25/03/2020", "26/03/2020", "27/03/2020", "28/03/2020", "29/03/2020", "30/03/2020", "31/03/2020", "01/04/2020", "02/04/2020", "03/04/2020", "04/04/2020", "05/04/2020", "6/4/2020"], "name": "Castilla y Le\u00f3n", "mode": "lines+markers"}, {"y": [850.0, 1134.0, 1418.0, 1511.0, 1898.0, 2105.0, 2582.0, 2890.0, 3089.0, 3427.0, 3780.0, 3959.0, 4267.0, 4299.0, 4589.0, 4812.0, 4785.0, 4744.0, 4653.0], "x": [1044.0, 1423.0, 1819.0, 2078.0, 2465.0, 2780.0, 3383.0, 3934.0, 4512.0, 5246.0, 5858.0, 6424.0, 7047.0, 7682.0, 8523.0, 9324.0, 10031.0, 10602.0, 11077.0], "text": ["19/03/2020", "20/03/2020", "21/03/2020", "22/03/2020", "23/03/2020", "24/03/2020", "25/03/2020", "26/03/2020", "27/03/2020", "28/03/2020", "29/03/2020", "30/03/2020", "31/03/2020", "01/04/2020", "02/04/2020", "03/04/2020", "04/04/2020", "05/04/2020", "6/4/2020"], "name": "Castilla-La Mancha", "mode": "lines+markers"}, {"y": [1270.0, 1710.0, 2442.0, 2954.0, 3694.0, 3989.0, 5022.0, 6470.0, 8071.0, 8890.0, 9670.0, 10060.0, 10322.0, 10232.0, 10909.0, 10054.0, 10212.0, 10520.0, 10471.0, 11006.0, 10667.0, 9550.0], "x": [1394.0, 1866.0, 2702.0, 3270.0, 4203.0, 4704.0, 5925.0, 7864.0, 9937.0, 11592.0, 12940.0, 14263.0, 15026.0, 16157.0, 18773.0, 19991.0, 21804.0, 23460.0, 24734.0, 26032.0, 26824.0, 28323.0], "text": ["16/03/2020", "17/03/2020", "18/03/2020", "19/03/2020", "20/03/2020", "21/03/2020", "22/03/2020", "23/03/2020", "24/03/2020", "25/03/2020", "26/03/2020", "27/03/2020", "28/03/2020", "29/03/2020", "30/03/2020", "31/03/2020", "01/04/2020", "02/04/2020", "03/04/2020", "04/04/2020", "05/04/2020", "6/4/2020"], "name": "Catalu\u00f1a", "mode": "lines+markers"}, {"y": [], "x": [], "text": [], "name": "Ceuta", "mode": "lines+markers"}, {"y": [1011.0, 1233.0, 1195.0, 1492.0, 1626.0, 1890.0, 2279.0, 2427.0, 2671.0, 3180.0, 3209.0, 3341.0, 3306.0, 3108.0, 3092.0, 2867.0, 2400.0, 2224.0, 1935.0], "x": [1105.0, 1363.0, 1604.0, 1901.0, 2167.0, 2616.0, 3200.0, 3532.0, 4034.0, 4784.0, 5110.0, 5508.0, 5922.0, 6308.0, 6624.0, 6901.0, 7184.0, 7334.0, 7443.0], "text": ["19/03/2020", "20/03/2020", "21/03/2020", "22/03/2020", "23/03/2020", "24/03/2020", "25/03/2020", "26/03/2020", "27/03/2020", "28/03/2020", "29/03/2020", "30/03/2020", "31/03/2020", "01/04/2020", "02/04/2020", "03/04/2020", "04/04/2020", "05/04/2020", "6/4/2020"], "name": "Comunidad Valenciana", "mode": "lines+markers"}, {"y": [954.0, 1298.0, 1853.0, 2803.0, 3369.0, 3696.0, 4089.0, 4613.0, 5389.0, 5175.0, 5981.0, 6158.0, 6410.0, 7481.0, 8960.0, 10389.0, 12078.0, 12599.0, 12975.0, 13515.0, 15157.0, 15243.0, 14989.0, 14945.0, 14729.0, 14907.0, 14633.0, 12960.0], "x": [1024.0, 1388.0, 1990.0, 2940.0, 3544.0, 4165.0, 4871.0, 5637.0, 6777.0, 7165.0, 8921.0, 9702.0, 10575.0, 12352.0, 14597.0, 17166.0, 19243.0, 21520.0, 22677.0, 24090.0, 27509.0, 29840.0, 32155.0, 34188.0, 36249.0, 37584.0, 38723.0, 40469.0], "text": ["10/03/2020", "11/03/2020", "12/03/2020", "13/03/2020", "14/03/2020", "15/03/2020", "16/03/2020", "17/03/2020", "18/03/2020", "19/03/2020", "20/03/2020", "21/03/2020", "22/03/2020", "23/03/2020", "24/03/2020", "25/03/2020", "26/03/2020", "27/03/2020", "28/03/2020", "29/03/2020", "30/03/2020", "31/03/2020", "01/04/2020", "02/04/2020", "03/04/2020", "04/04/2020", "05/04/2020", "6/4/2020"], "name": "Comunidad de Madrid", "mode": "lines+markers"}, {"y": [934.0, 1040.0, 1072.0, 1067.0, 992.0, 937.0, 868.0, 662.0, 585.0, 591.0, 508.0, 488.0], "x": [1231.0, 1394.0, 1456.0, 1560.0, 1628.0, 1679.0, 1837.0, 1893.0, 1979.0, 2047.0, 2068.0, 2116.0], "text": ["26/03/2020", "27/03/2020", "28/03/2020", "29/03/2020", "30/03/2020", "31/03/2020", "01/04/2020", "02/04/2020", "03/04/2020", "04/04/2020", "05/04/2020", "6/4/2020"], "name": "Extremadura", "mode": "lines+markers"}, {"y": [963.0, 1123.0, 1312.0, 1462.0, 1744.0, 2033.0, 2224.0, 2515.0, 2624.0, 2779.0, 2927.0, 2897.0, 2853.0, 2805.0, 2428.0, 2292.0], "x": [1208.0, 1415.0, 1653.0, 1915.0, 2322.0, 2772.0, 3139.0, 3723.0, 4039.0, 4432.0, 4842.0, 5219.0, 5625.0, 5944.0, 6151.0, 6331.0], "text": ["22/03/2020", "23/03/2020", "24/03/2020", "25/03/2020", "26/03/2020", "27/03/2020", "28/03/2020", "29/03/2020", "30/03/2020", "31/03/2020", "01/04/2020", "02/04/2020", "03/04/2020", "04/04/2020", "05/04/2020", "6/4/2020"], "name": "Galicia", "mode": "lines+markers"}, {"y": [591.0, 569.0, 544.0, 502.0, 409.0, 335.0, 320.0, 300.0], "x": [1069.0, 1131.0, 1204.0, 1257.0, 1271.0, 1293.0, 1320.0, 1369.0], "text": ["30/03/2020", "31/03/2020", "01/04/2020", "02/04/2020", "03/04/2020", "04/04/2020", "05/04/2020", "6/4/2020"], "name": "Islas Baleares", "mode": "lines+markers"}, {"y": [739.0, 872.0, 975.0, 986.0, 1008.0, 1032.0, 1088.0, 988.0, 969.0, 963.0, 986.0, 1036.0], "x": [1236.0, 1436.0, 1629.0, 1733.0, 1810.0, 1960.0, 2083.0, 2224.0, 2405.0, 2592.0, 2719.0, 2846.0], "text": ["26/03/2020", "27/03/2020", "28/03/2020", "29/03/2020", "30/03/2020", "31/03/2020", "01/04/2020", "02/04/2020", "03/04/2020", "04/04/2020", "05/04/2020", "6/4/2020"], "name": "La Rioja", "mode": "lines+markers"}, {"y": [], "x": [], "text": [], "name": "Melilla", "mode": "lines+markers"}, {"y": [701.0, 811.0, 929.0, 1087.0, 1165.0, 1217.0, 1260.0, 1291.0, 1300.0, 1271.0, 1195.0, 1143.0, 1062.0, 1085.0, 1050.0], "x": [1014.0, 1197.0, 1411.0, 1641.0, 1829.0, 2011.0, 2146.0, 2305.0, 2497.0, 2682.0, 2836.0, 2972.0, 3073.0, 3231.0, 3355.0], "text": ["23/03/2020", "24/03/2020", "25/03/2020", "26/03/2020", "27/03/2020", "28/03/2020", "29/03/2020", "30/03/2020", "31/03/2020", "01/04/2020", "02/04/2020", "03/04/2020", "04/04/2020", "05/04/2020", "6/4/2020"], "name": "Navarra", "mode": "lines+markers"}, {"y": [844.0, 1048.0, 1204.0, 1467.0, 1791.0, 1963.0, 2298.0, 2756.0, 3136.0, 3411.0, 3643.0, 3636.0, 3592.0, 3567.0, 3371.0, 3226.0, 3051.0, 2888.0, 2753.0, 2701.0], "x": [1190.0, 1465.0, 1725.0, 2097.0, 2421.0, 2728.0, 3271.0, 3946.0, 4601.0, 5136.0, 5740.0, 6057.0, 6320.0, 6838.0, 7317.0, 7827.0, 8187.0, 8628.0, 8810.0, 9021.0], "text": ["18/03/2020", "19/03/2020", "20/03/2020", "21/03/2020", "22/03/2020", "23/03/2020", "24/03/2020", "25/03/2020", "26/03/2020", "27/03/2020", "28/03/2020", "29/03/2020", "30/03/2020", "31/03/2020", "01/04/2020", "02/04/2020", "03/04/2020", "04/04/2020", "05/04/2020", "6/4/2020"], "name": "Pa\u00eds Vasco", "mode": "lines+markers"}, {"y": [564.0, 488.0, 431.0, 386.0, 363.0, 320.0, 309.0], "x": [1041.0, 1084.0, 1145.0, 1188.0, 1235.0, 1259.0, 1283.0], "text": ["31/03/2020", "01/04/2020", "02/04/2020", "03/04/2020", "04/04/2020", "05/04/2020", "6/4/2020"], "name": "Regi\u00f3n de Murcia", "mode": "lines+markers"}], "layout": {"title": "Exito frenando el coronavirus por comunidad", "xaxis": {"title": "Casos Totales", "type": "log"}, "yaxis": {"title": "Casos Nuevos Ultima Semana", "type": "log"}}}


	if (!fig) {
		test.innerText = "ERROR: fig variable is not defined"
		return
	}
	test.innerText = null
	Plotly.plot(test ,fig);
  }
  draw()
</script>
</div>

<div class="figure">
<div class="figure-plot" id="total_corona">
	Code could not finish, this are some reasons why this happen.
	- Plot name not defined. The first parameter of the shortcode is the name.
	- There is a syntax error. check browser console.
</div>
<script>
  function draw(){
	test = document.getElementById("total_corona");
	if (test == null){
		console.log("The plot name is not defined")
		return
	}

	fig = null
	
fig = {"data": [{"y": [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 5.0, 8.0, 9.0, 9.0, 13.0, 114.0, 155.0, 213.0, 251.0, 389.0, 870.0, 1458.0, 1923.0, 2691.0, 3764.0, 5455.0, 7163.0, 8134.0, 9554.0, 11599.0, 14218.0, 15850.0, 19082.0, 20874.0, 23940.0, 28495.0, 33894.0, 39041.0, 44079.0, 47322.0, 50225.0, 52106.0, 54744.0, 54526.0, 54050.0, 53651.0, 52488.0, 51962.0, 49837.0, 46093.0], "x": [2.0, 2.0, 2.0, 2.0, 3.0, 10.0, 16.0, 29.0, 43.0, 65.0, 113.0, 148.0, 194.0, 238.0, 364.0, 386.0, 526.0, 1006.0, 1606.0, 2117.0, 2929.0, 4130.0, 5844.0, 7698.0, 9149.0, 11178.0, 13716.0, 17147.0, 19980.0, 24926.0, 28572.0, 33089.0, 39673.0, 47610.0, 56188.0, 64059.0, 72248.0, 78797.0, 85195.0, 94417.0, 102136.0, 110238.0, 117710.0, 124736.0, 130759.0, 135032.0, 140510.0], "name": "casos totales", "mode": "lines+markers"}], "layout": {"title": "Exito frenando el coronavirus total", "xaxis": {"title": "Casos Totales", "type": "log"}, "yaxis": {"title": "Casos Nuevos Ultima Semana", "type": "log"}}}


	if (!fig) {
		test.innerText = "ERROR: fig variable is not defined"
		return
	}
	test.innerText = null
	Plotly.plot(test ,fig);
  }
  draw()
</script>
</div>

<p>leave your comments bellow.</p>


<div class="expand">
    <div class="expand-label" style="cursor: pointer;"
        onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
            
            
            &gt; Click here to see the code:
            
        </span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span><span class="p">,</span><span class="n">datetime</span><span class="p">,</span> <span class="n">date</span>
<span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">StringIO</span>


<span class="n">codigos</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;AN&#39;</span><span class="p">:</span><span class="s1">&#39;Andalucía&#39;</span><span class="p">,</span>
<span class="s1">&#39;AR&#39;</span><span class="p">:</span><span class="s1">&#39;Aragón&#39;</span><span class="p">,</span>
<span class="s1">&#39;AS&#39;</span><span class="p">:</span><span class="s1">&#39;Asturias&#39;</span><span class="p">,</span>
<span class="s1">&#39;CN&#39;</span><span class="p">:</span><span class="s1">&#39;Canarias&#39;</span><span class="p">,</span>
<span class="s1">&#39;CB&#39;</span><span class="p">:</span><span class="s1">&#39;Cantabria&#39;</span><span class="p">,</span>
<span class="s1">&#39;CM&#39;</span><span class="p">:</span><span class="s1">&#39;Castilla-La Mancha&#39;</span><span class="p">,</span>
<span class="s1">&#39;CL&#39;</span><span class="p">:</span><span class="s1">&#39;Castilla y León&#39;</span><span class="p">,</span>
<span class="s1">&#39;CT&#39;</span><span class="p">:</span><span class="s1">&#39;Cataluña&#39;</span><span class="p">,</span>
<span class="s1">&#39;EX&#39;</span><span class="p">:</span><span class="s1">&#39;Extremadura&#39;</span><span class="p">,</span>
<span class="s1">&#39;GA&#39;</span><span class="p">:</span><span class="s1">&#39;Galicia&#39;</span><span class="p">,</span>
<span class="s1">&#39;IB&#39;</span><span class="p">:</span><span class="s1">&#39;Islas Baleares&#39;</span><span class="p">,</span>
<span class="s1">&#39;RI&#39;</span><span class="p">:</span><span class="s1">&#39;La Rioja&#39;</span><span class="p">,</span>
<span class="s1">&#39;MD&#39;</span><span class="p">:</span><span class="s1">&#39;Comunidad de Madrid&#39;</span><span class="p">,</span>
<span class="s1">&#39;MC&#39;</span><span class="p">:</span><span class="s1">&#39;Región de Murcia&#39;</span><span class="p">,</span>
<span class="s1">&#39;NC&#39;</span><span class="p">:</span><span class="s1">&#39;Navarra&#39;</span><span class="p">,</span>
<span class="s1">&#39;PV&#39;</span><span class="p">:</span><span class="s1">&#39;País Vasco&#39;</span><span class="p">,</span>
<span class="s1">&#39;VC&#39;</span><span class="p">:</span><span class="s1">&#39;Comunidad Valenciana&#39;</span><span class="p">,</span>
<span class="s1">&#39;CE&#39;</span><span class="p">:</span><span class="s1">&#39;Ceuta&#39;</span><span class="p">,</span>
<span class="s1">&#39;ME&#39;</span><span class="p">:</span><span class="s1">&#39;Melilla&#39;</span>
<span class="p">}</span>

<span class="n">population</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="s2">&#34;https://es.wikipedia.org/wiki/Anexo:Provincias_y_ciudades_aut%C3%B3nomas_de_Espa%C3%B1a&#34;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">population</span><span class="o">.</span><span class="n">Población</span> <span class="o">=</span> <span class="n">population</span><span class="o">.</span><span class="n">Población</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;.&#34;</span><span class="p">,</span><span class="s2">&#34;&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">population</span> <span class="o">=</span> <span class="n">population</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&#34;Comunidad autónoma&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()[</span><span class="s2">&#34;Población&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;https://covid19.isciii.es/resources/serie_historica_acumulados.csv&#34;</span><span class="p">)</span>
<span class="n">text</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&#34;NOTA&#34;</span><span class="p">)]</span>
<span class="n">spain</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">text</span><span class="p">))</span>
<span class="n">spain</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span>  <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">spain</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
<span class="n">spain</span><span class="p">[</span><span class="s2">&#34;Provincia&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="n">spain</span><span class="p">[</span><span class="s2">&#34;CCAA Codigo ISO&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">codigos</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
<span class="n">spain</span><span class="p">[</span><span class="s2">&#34;Poblacion&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="n">spain</span><span class="o">.</span><span class="n">Provincia</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">population</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
<span class="n">spain</span><span class="p">[</span><span class="s2">&#34;Nuevos_Casos&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="n">spain</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&#34;Provincia&#34;</span><span class="p">)[</span><span class="s2">&#34;Casos&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span>
<span class="n">spain</span><span class="p">[</span><span class="s2">&#34;Casos_x_1000&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1000</span><span class="o">*</span><span class="n">spain</span><span class="o">.</span><span class="n">Casos</span> <span class="o">/</span> <span class="n">spain</span><span class="o">.</span><span class="n">Poblacion</span>
<span class="n">spain</span><span class="p">[</span><span class="s2">&#34;Nuevos_Casos_x_1000&#34;</span><span class="p">]</span> <span class="o">=</span>  <span class="mi">1000</span><span class="o">*</span> <span class="n">spain</span><span class="o">.</span><span class="n">Nuevos_Casos</span> <span class="o">/</span> <span class="n">spain</span><span class="o">.</span><span class="n">Poblacion</span>
<span class="n">spain</span><span class="p">[</span><span class="s2">&#34;Nuevos_Casos_Ultima_Semana&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="n">spain</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&#34;Provincia&#34;</span><span class="p">)[</span><span class="s2">&#34;Nuevos_Casos&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">spainc</span> <span class="o">=</span> <span class="n">spain</span><span class="p">[</span><span class="n">spain</span><span class="o">.</span><span class="n">Casos</span> <span class="o">&gt;</span> <span class="mi">1000</span><span class="p">]</span>

<span class="n">fig</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&#34;data&#34;</span><span class="p">:[</span> <span class="p">{</span>
        <span class="s2">&#34;y&#34;</span><span class="p">:</span><span class="n">spainc</span><span class="p">[(</span><span class="n">spainc</span><span class="p">[</span><span class="s2">&#34;Provincia&#34;</span><span class="p">]</span><span class="o">==</span><span class="n">cat</span><span class="p">)][</span><span class="s2">&#34;Nuevos_Casos_Ultima_Semana&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">(),</span>
        <span class="s2">&#34;x&#34;</span><span class="p">:</span><span class="n">spainc</span><span class="p">[(</span><span class="n">spainc</span><span class="p">[</span><span class="s2">&#34;Provincia&#34;</span><span class="p">]</span><span class="o">==</span><span class="n">cat</span><span class="p">)][</span><span class="s2">&#34;Casos&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">(),</span>
        <span class="s2">&#34;text&#34;</span><span class="p">:</span> <span class="n">spainc</span><span class="p">[(</span><span class="n">spainc</span><span class="p">[</span><span class="s2">&#34;Provincia&#34;</span><span class="p">]</span><span class="o">==</span><span class="n">cat</span><span class="p">)][</span><span class="s2">&#34;Fecha&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">(),</span>
        <span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="n">cat</span><span class="p">,</span>
        <span class="s2">&#34;mode&#34;</span><span class="p">:</span> <span class="s2">&#34;lines+markers&#34;</span>
    <span class="p">}</span> <span class="k">for</span> <span class="n">cat</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">spain</span><span class="p">[</span><span class="s2">&#34;Provincia&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span> <span class="p">],</span>
    <span class="s2">&#34;layout&#34;</span><span class="p">:{</span>
        <span class="s2">&#34;title&#34;</span><span class="p">:</span><span class="s2">&#34;Exito frenando el coronavirus por comunidad&#34;</span><span class="p">,</span>
        <span class="s2">&#34;xaxis&#34;</span><span class="p">:{</span>
            <span class="s2">&#34;title&#34;</span><span class="p">:</span> <span class="s2">&#34;Casos Totales&#34;</span><span class="p">,</span>
            <span class="s2">&#34;type&#34;</span><span class="p">:</span><span class="s2">&#34;log&#34;</span>
        <span class="p">},</span>
        <span class="s2">&#34;yaxis&#34;</span><span class="p">:{</span>
            <span class="s2">&#34;title&#34;</span><span class="p">:</span> <span class="s2">&#34;Casos Nuevos Ultima Semana&#34;</span><span class="p">,</span>
            <span class="s2">&#34;type&#34;</span><span class="p">:</span><span class="s2">&#34;log&#34;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
<span class="p">}</span>

<span class="n">local</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

<span class="n">aggregated</span> <span class="o">=</span> <span class="n">spain</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&#34;Fecha&#34;</span><span class="p">],</span><span class="n">as_index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()[[</span><span class="s2">&#34;Fecha&#34;</span><span class="p">,</span><span class="s2">&#34;Casos&#34;</span><span class="p">,</span><span class="s2">&#34;Nuevos_Casos&#34;</span><span class="p">,</span><span class="s2">&#34;Nuevos_Casos_Ultima_Semana&#34;</span><span class="p">]]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&#34;Casos&#34;</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&#34;data&#34;</span><span class="p">:</span> <span class="p">[{</span>
        <span class="s2">&#34;y&#34;</span><span class="p">:</span><span class="n">aggregated</span><span class="p">[</span><span class="s2">&#34;Nuevos_Casos_Ultima_Semana&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">(),</span>
        <span class="s2">&#34;x&#34;</span><span class="p">:</span><span class="n">aggregated</span><span class="p">[</span><span class="s2">&#34;Casos&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">(),</span>
        <span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;casos totales&#34;</span><span class="p">,</span>
        <span class="s2">&#34;mode&#34;</span><span class="p">:</span> <span class="s2">&#34;lines+markers&#34;</span>
    <span class="p">}],</span>
    <span class="s2">&#34;layout&#34;</span><span class="p">:{</span>
        <span class="s2">&#34;title&#34;</span><span class="p">:</span><span class="s2">&#34;Exito frenando el coronavirus total&#34;</span><span class="p">,</span>
        <span class="s2">&#34;xaxis&#34;</span><span class="p">:{</span>
            <span class="s2">&#34;title&#34;</span><span class="p">:</span> <span class="s2">&#34;Casos Totales&#34;</span><span class="p">,</span>
            <span class="s2">&#34;type&#34;</span><span class="p">:</span><span class="s2">&#34;log&#34;</span>
        <span class="p">},</span>
        <span class="s2">&#34;yaxis&#34;</span><span class="p">:{</span>
            <span class="s2">&#34;title&#34;</span><span class="p">:</span> <span class="s2">&#34;Casos Nuevos Ultima Semana&#34;</span><span class="p">,</span>
            <span class="s2">&#34;type&#34;</span><span class="p">:</span><span class="s2">&#34;log&#34;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
<span class="p">}</span>


<span class="n">total</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

<span class="n">template</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;
</span><span class="s2">{{&lt; plot &#34;local_corona&#34; &gt;}}
</span><span class="s2">fig = </span><span class="si">%s</span><span class="s2">
</span><span class="s2">{{&lt; /plot &gt;}}
</span><span class="s2">
</span><span class="s2">{{&lt; plot &#34;total_corona&#34; &gt;}}
</span><span class="s2">fig = </span><span class="si">%s</span><span class="s2">
</span><span class="s2">{{&lt; /plot &gt;}}
</span><span class="s2">&#34;&#34;&#34;</span>

<span class="k">print</span><span class="p">(</span><span class="n">template</span> <span class="o">%</span> <span class="p">(</span><span class="n">local</span><span class="p">,</span> <span class="n">total</span><span class="p">))</span></code></pre></td></tr></table>
</div>
</div>
<p>Refer to <a href="https://metalblueberry.github.io/post/howto/2019-11-23_add_plots_with_hugo_shortcodes/">Add Plots With Hugo Shortcodes</a> if you do not understand the previus template.</p>

    </div>
</div>

<h2 id="references">References</h2>

<ul>
<li><a href="https://covid19.isciii.es/">Situación COVID-19 España</a></li>
</ul>
    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/coronavirus/">coronavirus</a>
          </div>
      <nav class="post-nav">
        
        <a class="next" href="/post/blog/2020-03-30-weekend_learnings/">
            <span class="next-text nav-default">2020-03-30 Weekend Learnings</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  
    <script src="https://utteranc.es/client.js"
            repo="MetalBlueberry/MetalBlueberry.github.io"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:metalblueberry@email.com" class="iconfont icon-email" title="email"></a>
      <a href="https://twitter.com/MetalBlueberry" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://www.linkedin.com/in/victorperezdomingo/" class="iconfont icon-linkedin" title="linkedin"></a>
      <a href="https://github.com/MetalBlueberry" class="iconfont icon-github" title="github"></a>
  <a href="https://metalblueberry.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2019 - 
    2020
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">MetalBlueberry</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
<script type="text/javascript" src="/dist/even.26188efa.min.js"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-150427130-1', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>







</body>
</html>
