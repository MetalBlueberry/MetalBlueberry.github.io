<!DOCTYPE html>
<html lang="en"><meta charset="utf-8"><meta name="generator" content="Hugo 0.59.1" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="color-scheme" content="light dark">
<meta name="supported-color-schemes" content="light dark"><title>Coronavirus Trend In Spain&nbsp;&ndash;&nbsp;MetalBlueberry</title><link rel="stylesheet" href="/css/core.min.97dca4f10b4a76a5c62d6c5855e9eaab3b083ba20b6e4059f24dc20a8bb331c418ecdfd5449a29ef5333ebc2c64b286b.css" integrity="sha384-l9yk8QtKdqXGLWxYVenqqzsIO6ILbkBZ8k3CCouzMcQY7N/VRJop71Mz68LGSyhr"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Coronavirus Trend In Spain"/>
<meta name="twitter:description" content="After the video from Minute Earth about the coronavirus, I&rsquo;ve decided to plot the same data but only for Spain by province. This gives a good view of which provinces are managing to stop the virus."/>

<meta property="og:title" content="Coronavirus Trend In Spain" />
<meta property="og:description" content="After the video from Minute Earth about the coronavirus, I&rsquo;ve decided to plot the same data but only for Spain by province. This gives a good view of which provinces are managing to stop the virus." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://metalblueberry.github.io/post/blog/2020-04-06_coronavirus_trend_in_spain/" />
<meta property="article:published_time" content="2020-04-07T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-04-10T11:35:19+02:00" />

<meta name="author" content="MetalBlueberry">

<script src="https://cdn.plot.ly/plotly-1.50.0.min.js"></script>
<body>
    <div class="base-body"><section id="header" class="site header">
    <div class="header wrap"><span class="header left-side"><a class="site home" href="/"><img class="site logo" src="/android-chrome-512x512.png" alt /><span class="site name">MetalBlueberry</span></a></span>
        <span class="header right-side"><div class="nav wrap"><nav class="nav"><a class="nav item" href="/about">About</a><a class="nav item" href="/social">Follow me</a></nav></div></span></div><div class="site slogan"><span class="title">A passionate programmer</span></div></section><div id="content"><div class="article-container"><section class="article header">
    <h1 class="article title">Coronavirus Trend In Spain</h1><p class="article date">Tuesday, April 7, 2020<span class="lastmod"> • edited Friday, April 10, 2020</span></p></section><article class="article markdown-body"><p>After the video from Minute Earth about the coronavirus, I&rsquo;ve decided to plot the same data but only for Spain by province. This gives a good view of which provinces are managing to stop the virus.</p>

<p>You have to watch the video to understand the following plots.</p>


<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube-nocookie.com/embed/54XLXg4fYsc" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>


<p>Not that your understand&hellip; enjoy it.</p>

<p>You can double click on a label to Isolate it or single click to hide.</p>

<div class="figure">
<div class="figure-plot" id="local_corona">
	Code could not finish, this are some reasons why this happen.
	- Plot name not defined. The first parameter of the shortcode is the name.
	- There is a syntax error. check browser console.
</div>
<script>
  function draw(){
	test = document.getElementById("local_corona");
	if (test == null){
		console.log("The plot name is not defined")
		return
	}

	fig = null
	
fig = {"data": [{"y": [893.0, 1068.0, 1246.0, 1288.0, 1407.0, 1788.0, 2151.0, 2398.0, 2506.0, 2762.0, 2957.0, 3444.0, 3347.0, 3382.0, 3566.0, 3581.0, 3592.0, 3619.0, 3176.0, 2949.0, 2605.0], "x": [1008.0, 1287.0, 1515.0, 1725.0, 1961.0, 2471.0, 3010.0, 3406.0, 3793.0, 4277.0, 4682.0, 5405.0, 5818.0, 6392.0, 6972.0, 7374.0, 7869.0, 8301.0, 8581.0, 8767.0, 8997.0], "text": ["18/3/2020", "19/3/2020", "20/3/2020", "21/3/2020", "22/3/2020", "23/3/2020", "24/3/2020", "25/3/2020", "26/3/2020", "27/3/2020", "28/3/2020", "29/3/2020", "30/3/2020", "31/3/2020", "1/4/2020", "2/4/2020", "3/4/2020", "4/4/2020", "5/4/2020", "6/4/2020", "7/4/2020"], "name": "Andaluc\u00eda", "mode": "lines+markers"}, {"y": [835.0, 978.0, 1168.0, 1326.0, 1440.0, 1514.0, 1584.0, 1584.0, 1551.0, 1486.0, 1374.0, 1269.0, 1177.0, 1058.0], "x": [1116.0, 1338.0, 1592.0, 1858.0, 2078.0, 2272.0, 2491.0, 2700.0, 2889.0, 3078.0, 3232.0, 3347.0, 3449.0, 3549.0], "text": ["25/3/2020", "26/3/2020", "27/3/2020", "28/3/2020", "29/3/2020", "30/3/2020", "31/3/2020", "1/4/2020", "2/4/2020", "3/4/2020", "4/4/2020", "5/4/2020", "6/4/2020", "7/4/2020"], "name": "Arag\u00f3n", "mode": "lines+markers"}, {"y": [518.0, 543.0, 564.0, 574.0, 543.0, 543.0, 533.0, 518.0, 517.0, 488.0, 443.0, 383.0], "x": [1004.0, 1088.0, 1158.0, 1236.0, 1322.0, 1384.0, 1433.0, 1522.0, 1605.0, 1646.0, 1679.0, 1705.0], "text": ["27/3/2020", "28/3/2020", "29/3/2020", "30/3/2020", "31/3/2020", "1/4/2020", "2/4/2020", "3/4/2020", "4/4/2020", "5/4/2020", "6/4/2020", "7/4/2020"], "name": "Asturias", "mode": "lines+markers"}, {"y": [677.0, 711.0, 723.0, 705.0, 723.0, 660.0, 612.0, 539.0, 497.0, 445.0, 463.0, 382.0], "x": [1025.0, 1125.0, 1204.0, 1262.0, 1380.0, 1444.0, 1490.0, 1564.0, 1622.0, 1649.0, 1725.0, 1762.0], "text": ["27/3/2020", "28/3/2020", "29/3/2020", "30/3/2020", "31/3/2020", "1/4/2020", "2/4/2020", "3/4/2020", "4/4/2020", "5/4/2020", "6/4/2020", "7/4/2020"], "name": "Canarias", "mode": "lines+markers"}, {"y": [741.0, 753.0, 746.0, 703.0, 597.0, 511.0, 447.0, 418.0, 383.0, 330.0, 359.0], "x": [1023.0, 1100.0, 1171.0, 1213.0, 1268.0, 1321.0, 1384.0, 1441.0, 1483.0, 1501.0, 1572.0], "text": ["28/3/2020", "29/3/2020", "30/3/2020", "31/3/2020", "1/4/2020", "2/4/2020", "3/4/2020", "4/4/2020", "5/4/2020", "6/4/2020", "7/4/2020"], "name": "Cantabria", "mode": "lines+markers"}, {"y": [1055.0, 1297.0, 1521.0, 1763.0, 2029.0, 2272.0, 2620.0, 2985.0, 3325.0, 3670.0, 3746.0, 3751.0, 3907.0, 3867.0, 3743.0, 3541.0, 3335.0, 3315.0, 3370.0, 3211.0], "x": [1147.0, 1466.0, 1744.0, 2055.0, 2460.0, 2940.0, 3488.0, 4132.0, 4791.0, 5414.0, 5801.0, 6211.0, 6847.0, 7355.0, 7875.0, 8332.0, 8749.0, 9116.0, 9581.0, 10058.0], "text": ["19/3/2020", "20/3/2020", "21/3/2020", "22/3/2020", "23/3/2020", "24/3/2020", "25/3/2020", "26/3/2020", "27/3/2020", "28/3/2020", "29/3/2020", "30/3/2020", "31/3/2020", "1/4/2020", "2/4/2020", "3/4/2020", "4/4/2020", "5/4/2020", "6/4/2020", "7/4/2020"], "name": "Castilla y Le\u00f3n", "mode": "lines+markers"}, {"y": [850.0, 1134.0, 1418.0, 1511.0, 1898.0, 2105.0, 2582.0, 2890.0, 3089.0, 3427.0, 3780.0, 3959.0, 4267.0, 4299.0, 4589.0, 4812.0, 4785.0, 4744.0, 4653.0, 4741.0], "x": [1044.0, 1423.0, 1819.0, 2078.0, 2465.0, 2780.0, 3383.0, 3934.0, 4512.0, 5246.0, 5858.0, 6424.0, 7047.0, 7682.0, 8523.0, 9324.0, 10031.0, 10602.0, 11077.0, 11788.0], "text": ["19/3/2020", "20/3/2020", "21/3/2020", "22/3/2020", "23/3/2020", "24/3/2020", "25/3/2020", "26/3/2020", "27/3/2020", "28/3/2020", "29/3/2020", "30/3/2020", "31/3/2020", "1/4/2020", "2/4/2020", "3/4/2020", "4/4/2020", "5/4/2020", "6/4/2020", "7/4/2020"], "name": "Castilla-La Mancha", "mode": "lines+markers"}, {"y": [1270.0, 1710.0, 2442.0, 2954.0, 3694.0, 3989.0, 5022.0, 6470.0, 8071.0, 8890.0, 9670.0, 10060.0, 10322.0, 10232.0, 10909.0, 10054.0, 10212.0, 10520.0, 10471.0, 11006.0, 10667.0, 9550.0, 9656.0], "x": [1394.0, 1866.0, 2702.0, 3270.0, 4203.0, 4704.0, 5925.0, 7864.0, 9937.0, 11592.0, 12940.0, 14263.0, 15026.0, 16157.0, 18773.0, 19991.0, 21804.0, 23460.0, 24734.0, 26032.0, 26824.0, 28323.0, 29647.0], "text": ["16/3/2020", "17/3/2020", "18/3/2020", "19/3/2020", "20/3/2020", "21/3/2020", "22/3/2020", "23/3/2020", "24/3/2020", "25/3/2020", "26/3/2020", "27/3/2020", "28/3/2020", "29/3/2020", "30/3/2020", "31/3/2020", "1/4/2020", "2/4/2020", "3/4/2020", "4/4/2020", "5/4/2020", "6/4/2020", "7/4/2020"], "name": "Catalu\u00f1a", "mode": "lines+markers"}, {"y": [], "x": [], "text": [], "name": "Ceuta", "mode": "lines+markers"}, {"y": [1011.0, 1233.0, 1195.0, 1492.0, 1626.0, 1890.0, 2279.0, 2427.0, 2671.0, 3180.0, 3209.0, 3341.0, 3306.0, 3108.0, 3092.0, 2867.0, 2400.0, 2224.0, 1935.0, 1733.0], "x": [1105.0, 1363.0, 1604.0, 1901.0, 2167.0, 2616.0, 3200.0, 3532.0, 4034.0, 4784.0, 5110.0, 5508.0, 5922.0, 6308.0, 6624.0, 6901.0, 7184.0, 7334.0, 7443.0, 7655.0], "text": ["19/3/2020", "20/3/2020", "21/3/2020", "22/3/2020", "23/3/2020", "24/3/2020", "25/3/2020", "26/3/2020", "27/3/2020", "28/3/2020", "29/3/2020", "30/3/2020", "31/3/2020", "1/4/2020", "2/4/2020", "3/4/2020", "4/4/2020", "5/4/2020", "6/4/2020", "7/4/2020"], "name": "Comunidad Valenciana", "mode": "lines+markers"}, {"y": [954.0, 1298.0, 1853.0, 2803.0, 3369.0, 3696.0, 4089.0, 4613.0, 5389.0, 5175.0, 5981.0, 6158.0, 6410.0, 7481.0, 8960.0, 10389.0, 12078.0, 12599.0, 12975.0, 13515.0, 15157.0, 15243.0, 14989.0, 14945.0, 14729.0, 14907.0, 14633.0, 12960.0, 12610.0], "x": [1024.0, 1388.0, 1990.0, 2940.0, 3544.0, 4165.0, 4871.0, 5637.0, 6777.0, 7165.0, 8921.0, 9702.0, 10575.0, 12352.0, 14597.0, 17166.0, 19243.0, 21520.0, 22677.0, 24090.0, 27509.0, 29840.0, 32155.0, 34188.0, 36249.0, 37584.0, 38723.0, 40469.0, 42450.0], "text": ["10/3/2020", "11/3/2020", "12/3/2020", "13/3/2020", "14/3/2020", "15/3/2020", "16/3/2020", "17/3/2020", "18/3/2020", "19/3/2020", "20/3/2020", "21/3/2020", "22/3/2020", "23/3/2020", "24/3/2020", "25/3/2020", "26/3/2020", "27/3/2020", "28/3/2020", "29/3/2020", "30/3/2020", "31/3/2020", "1/4/2020", "2/4/2020", "3/4/2020", "4/4/2020", "5/4/2020", "6/4/2020", "7/4/2020"], "name": "Comunidad de Madrid", "mode": "lines+markers"}, {"y": [934.0, 1040.0, 1072.0, 1067.0, 992.0, 937.0, 868.0, 662.0, 585.0, 591.0, 508.0, 488.0, 505.0], "x": [1231.0, 1394.0, 1456.0, 1560.0, 1628.0, 1679.0, 1837.0, 1893.0, 1979.0, 2047.0, 2068.0, 2116.0, 2184.0], "text": ["26/3/2020", "27/3/2020", "28/3/2020", "29/3/2020", "30/3/2020", "31/3/2020", "1/4/2020", "2/4/2020", "3/4/2020", "4/4/2020", "5/4/2020", "6/4/2020", "7/4/2020"], "name": "Extremadura", "mode": "lines+markers"}, {"y": [963.0, 1123.0, 1312.0, 1462.0, 1744.0, 2033.0, 2224.0, 2515.0, 2624.0, 2779.0, 2927.0, 2897.0, 2853.0, 2805.0, 2428.0, 2292.0, 2106.0], "x": [1208.0, 1415.0, 1653.0, 1915.0, 2322.0, 2772.0, 3139.0, 3723.0, 4039.0, 4432.0, 4842.0, 5219.0, 5625.0, 5944.0, 6151.0, 6331.0, 6538.0], "text": ["22/3/2020", "23/3/2020", "24/3/2020", "25/3/2020", "26/3/2020", "27/3/2020", "28/3/2020", "29/3/2020", "30/3/2020", "31/3/2020", "1/4/2020", "2/4/2020", "3/4/2020", "4/4/2020", "5/4/2020", "6/4/2020", "7/4/2020"], "name": "Galicia", "mode": "lines+markers"}, {"y": [591.0, 569.0, 544.0, 502.0, 409.0, 335.0, 320.0, 300.0, 281.0], "x": [1069.0, 1131.0, 1204.0, 1257.0, 1271.0, 1293.0, 1320.0, 1369.0, 1412.0], "text": ["30/3/2020", "31/3/2020", "1/4/2020", "2/4/2020", "3/4/2020", "4/4/2020", "5/4/2020", "6/4/2020", "7/4/2020"], "name": "Islas Baleares", "mode": "lines+markers"}, {"y": [739.0, 872.0, 975.0, 986.0, 1008.0, 1032.0, 1088.0, 988.0, 969.0, 963.0, 986.0, 1036.0, 991.0], "x": [1236.0, 1436.0, 1629.0, 1733.0, 1810.0, 1960.0, 2083.0, 2224.0, 2405.0, 2592.0, 2719.0, 2846.0, 2951.0], "text": ["26/3/2020", "27/3/2020", "28/3/2020", "29/3/2020", "30/3/2020", "31/3/2020", "1/4/2020", "2/4/2020", "3/4/2020", "4/4/2020", "5/4/2020", "6/4/2020", "7/4/2020"], "name": "La Rioja", "mode": "lines+markers"}, {"y": [], "x": [], "text": [], "name": "Melilla", "mode": "lines+markers"}, {"y": [701.0, 811.0, 929.0, 1087.0, 1165.0, 1217.0, 1260.0, 1291.0, 1300.0, 1271.0, 1195.0, 1143.0, 1062.0, 1085.0, 1050.0, 970.0], "x": [1014.0, 1197.0, 1411.0, 1641.0, 1829.0, 2011.0, 2146.0, 2305.0, 2497.0, 2682.0, 2836.0, 2972.0, 3073.0, 3231.0, 3355.0, 3467.0], "text": ["23/3/2020", "24/3/2020", "25/3/2020", "26/3/2020", "27/3/2020", "28/3/2020", "29/3/2020", "30/3/2020", "31/3/2020", "1/4/2020", "2/4/2020", "3/4/2020", "4/4/2020", "5/4/2020", "6/4/2020", "7/4/2020"], "name": "Navarra", "mode": "lines+markers"}, {"y": [844.0, 1048.0, 1204.0, 1467.0, 1791.0, 1963.0, 2298.0, 2756.0, 3136.0, 3411.0, 3643.0, 3636.0, 3592.0, 3567.0, 3371.0, 3226.0, 3051.0, 2888.0, 2753.0, 2701.0, 2614.0], "x": [1190.0, 1465.0, 1725.0, 2097.0, 2421.0, 2728.0, 3271.0, 3946.0, 4601.0, 5136.0, 5740.0, 6057.0, 6320.0, 6838.0, 7317.0, 7827.0, 8187.0, 8628.0, 8810.0, 9021.0, 9452.0], "text": ["18/3/2020", "19/3/2020", "20/3/2020", "21/3/2020", "22/3/2020", "23/3/2020", "24/3/2020", "25/3/2020", "26/3/2020", "27/3/2020", "28/3/2020", "29/3/2020", "30/3/2020", "31/3/2020", "1/4/2020", "2/4/2020", "3/4/2020", "4/4/2020", "5/4/2020", "6/4/2020", "7/4/2020"], "name": "Pa\u00eds Vasco", "mode": "lines+markers"}, {"y": [564.0, 488.0, 431.0, 386.0, 363.0, 320.0, 309.0, 285.0], "x": [1041.0, 1084.0, 1145.0, 1188.0, 1235.0, 1259.0, 1283.0, 1326.0], "text": ["31/3/2020", "1/4/2020", "2/4/2020", "3/4/2020", "4/4/2020", "5/4/2020", "6/4/2020", "7/4/2020"], "name": "Regi\u00f3n de Murcia", "mode": "lines+markers"}], "layout": {"title": "Exito frenando el coronavirus por comunidad", "xaxis": {"title": "Casos Totales", "type": "log"}, "yaxis": {"title": "Casos Nuevos Ultima Semana", "type": "log"}}}


	if (!fig) {
		test.innerText = "ERROR: fig variable is not defined"
		return
	}
	test.innerText = null
	Plotly.plot(test ,fig);
  }
  draw()
</script>
</div>

<div class="figure">
<div class="figure-plot" id="total_corona">
	Code could not finish, this are some reasons why this happen.
	- Plot name not defined. The first parameter of the shortcode is the name.
	- There is a syntax error. check browser console.
</div>
<script>
  function draw(){
	test = document.getElementById("total_corona");
	if (test == null){
		console.log("The plot name is not defined")
		return
	}

	fig = null
	
fig = {"data": [{"y": [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 5.0, 8.0, 9.0, 9.0, 13.0, 114.0, 155.0, 213.0, 251.0, 389.0, 870.0, 1458.0, 1923.0, 2691.0, 3764.0, 5455.0, 7163.0, 8134.0, 9554.0, 11599.0, 14218.0, 15850.0, 19082.0, 20874.0, 23940.0, 28495.0, 33894.0, 39041.0, 44079.0, 47322.0, 50225.0, 52106.0, 54744.0, 54526.0, 54050.0, 53651.0, 52488.0, 51962.0, 49837.0, 46093.0, 44554.0], "x": [2.0, 2.0, 2.0, 2.0, 3.0, 10.0, 16.0, 29.0, 43.0, 65.0, 113.0, 148.0, 194.0, 238.0, 364.0, 386.0, 526.0, 1006.0, 1606.0, 2117.0, 2929.0, 4130.0, 5844.0, 7698.0, 9149.0, 11178.0, 13716.0, 17147.0, 19980.0, 24926.0, 28572.0, 33089.0, 39673.0, 47610.0, 56188.0, 64059.0, 72248.0, 78797.0, 85195.0, 94417.0, 102136.0, 110238.0, 117710.0, 124736.0, 130759.0, 135032.0, 140510.0, 146690.0], "name": "casos totales", "mode": "lines+markers"}], "layout": {"title": "Exito frenando el coronavirus total", "xaxis": {"title": "Casos Totales", "type": "log"}, "yaxis": {"title": "Casos Nuevos Ultima Semana", "type": "log"}}}


	if (!fig) {
		test.innerText = "ERROR: fig variable is not defined"
		return
	}
	test.innerText = null
	Plotly.plot(test ,fig);
  }
  draw()
</script>
</div>

<p>leave your comments bellow.</p>

<div class="expand">
    <div class="expand-label" id="expand-label-3" style="cursor: pointer;">
        <span>
            
            
            Click here to see the code:
            
        </span>
    </div>
    <div class="expand-content" id="expand-content-3" style="display: none;">
        <pre><code class="language-python">import pandas as pd
import requests
import json

from datetime import timedelta,datetime, date
from io import StringIO


codigos = {'AN':'Andalucía',
'AR':'Aragón',
'AS':'Asturias',
'CN':'Canarias',
'CB':'Cantabria',
'CM':'Castilla-La Mancha',
'CL':'Castilla y León',
'CT':'Cataluña',
'EX':'Extremadura',
'GA':'Galicia',
'IB':'Islas Baleares',
'RI':'La Rioja',
'MD':'Comunidad de Madrid',
'MC':'Región de Murcia',
'NC':'Navarra',
'PV':'País Vasco',
'VC':'Comunidad Valenciana',
'CE':'Ceuta',
'ML':'Melilla'
}


population = pd.read_html(&quot;https://es.wikipedia.org/wiki/Anexo:Provincias_y_ciudades_aut%C3%B3nomas_de_Espa%C3%B1a&quot;)[0]
population.Población = population.Población.str.replace(&quot;.&quot;,&quot;&quot;).astype(int)
population = population.groupby(&quot;Comunidad autónoma&quot;).sum()[&quot;Población&quot;].to_dict()

r = requests.get(&quot;https://covid19.isciii.es/resources/serie_historica_acumulados.csv&quot;)
text = r.text[0:r.text.index(&quot;NOTA&quot;)]
spain = pd.read_csv(StringIO(text)).dropna(subset=[&quot;CCAA&quot;])
spain.columns =  [c.strip() for c in spain.columns]
spain[&quot;Provincia&quot;] = spain[&quot;CCAA&quot;].apply(lambda x: codigos[x])
spain[&quot;Poblacion&quot;] = spain.Provincia.apply(lambda x: population[x])
spain[&quot;Nuevos_Casos&quot;] = spain.groupby(&quot;Provincia&quot;)[&quot;CASOS&quot;].diff()
spain[&quot;Casos_x_1000&quot;] = 1000*spain.CASOS / spain.Poblacion
spain[&quot;Nuevos_Casos_x_1000&quot;] =  1000* spain.Nuevos_Casos / spain.Poblacion
spain[&quot;Nuevos_Casos_Ultima_Semana&quot;] = spain.groupby(&quot;Provincia&quot;)[&quot;Nuevos_Casos&quot;].rolling(7).sum().reset_index(0,drop=True)
spainc = spain[spain.CASOS &gt; 1000]

fig = {
    &quot;data&quot;:[ {
        &quot;y&quot;:spainc[(spainc[&quot;Provincia&quot;]==cat)][&quot;Nuevos_Casos_Ultima_Semana&quot;].to_list(),
        &quot;x&quot;:spainc[(spainc[&quot;Provincia&quot;]==cat)][&quot;CASOS&quot;].to_list(),
        &quot;text&quot;: spainc[(spainc[&quot;Provincia&quot;]==cat)][&quot;FECHA&quot;].to_list(),
        &quot;name&quot;: cat,
        &quot;mode&quot;: &quot;lines+markers&quot;
    } for cat in sorted(spain[&quot;Provincia&quot;].unique()) ],
    &quot;layout&quot;:{
        &quot;title&quot;:&quot;Exito frenando el coronavirus por comunidad&quot;,
        &quot;xaxis&quot;:{
            &quot;title&quot;: &quot;Casos Totales&quot;,
            &quot;type&quot;:&quot;log&quot;
        },
        &quot;yaxis&quot;:{
            &quot;title&quot;: &quot;Casos Nuevos Ultima Semana&quot;,
            &quot;type&quot;:&quot;log&quot;
        }
    }
    
}
local = json.dumps(fig)


aggregated = spain.groupby([&quot;FECHA&quot;],as_index=False).sum()[[&quot;FECHA&quot;,&quot;CASOS&quot;,&quot;Nuevos_Casos&quot;,&quot;Nuevos_Casos_Ultima_Semana&quot;]].sort_values(&quot;CASOS&quot;)
fig = {
    &quot;data&quot;: [{
        &quot;y&quot;:aggregated[&quot;Nuevos_Casos_Ultima_Semana&quot;].to_list(),
        &quot;x&quot;:aggregated[&quot;CASOS&quot;].to_list(),
        &quot;name&quot;: &quot;casos totales&quot;,
        &quot;mode&quot;: &quot;lines+markers&quot;
    }],
    &quot;layout&quot;:{
        &quot;title&quot;:&quot;Exito frenando el coronavirus total&quot;,
        &quot;xaxis&quot;:{
            &quot;title&quot;: &quot;Casos Totales&quot;,
            &quot;type&quot;:&quot;log&quot;
        },
        &quot;yaxis&quot;:{
            &quot;title&quot;: &quot;Casos Nuevos Ultima Semana&quot;,
            &quot;type&quot;:&quot;log&quot;
        }
    }
    
}
total = json.dumps(fig)

template = &quot;&quot;&quot;
&lt;div class=&quot;figure&quot;&gt;
&lt;div class=&quot;figure-plot&quot; id=&quot;local_corona&quot;&gt;
	Code could not finish, this are some reasons why this happen.
	- Plot name not defined. The first parameter of the shortcode is the name.
	- There is a syntax error. check browser console.
&lt;/div&gt;
&lt;script&gt;
  function draw(){
	test = document.getElementById(&quot;local_corona&quot;);
	if (test == null){
		console.log(&quot;The plot name is not defined&quot;)
		return
	}

	fig = null
	
fig = %s


	if (!fig) {
		test.innerText = &quot;ERROR: fig variable is not defined&quot;
		return
	}
	test.innerText = null
	Plotly.plot(test ,fig);
  }
  draw()
&lt;/script&gt;
&lt;/div&gt;

&lt;div class=&quot;figure&quot;&gt;
&lt;div class=&quot;figure-plot&quot; id=&quot;total_corona&quot;&gt;
	Code could not finish, this are some reasons why this happen.
	- Plot name not defined. The first parameter of the shortcode is the name.
	- There is a syntax error. check browser console.
&lt;/div&gt;
&lt;script&gt;
  function draw(){
	test = document.getElementById(&quot;total_corona&quot;);
	if (test == null){
		console.log(&quot;The plot name is not defined&quot;)
		return
	}

	fig = null
	
fig = %s


	if (!fig) {
		test.innerText = &quot;ERROR: fig variable is not defined&quot;
		return
	}
	test.innerText = null
	Plotly.plot(test ,fig);
  }
  draw()
&lt;/script&gt;
&lt;/div&gt;
&quot;&quot;&quot;

print(template % (local, total))
</code></pre>

<p>Refer to <a href="https://metalblueberry.github.io/post/howto/2019-11-23_add_plots_with_hugo_shortcodes/">Add Plots With Hugo Shortcodes</a> if you do not understand the previus template.</p>

    </div>
    <script>
        function collapse(e) {
            e = e || window.event;
            var target = e.target || e.srcElement,
                text = target.textContent || target.innerText;

            console.log("event received")
            console.log(target)

            target.classList.toggle("active");
            var content = this.nextElementSibling;
            console.log(content)
            console.log(content.style.display)
            if (content.style.display === "block") {
                content.style.display = "none";
                console.log(content.style.display)
            } else {
                content.style.display = "block";
            }
        }
        document.getElementById("expand-label-3").addEventListener("click", collapse);
    </script>
</div>

<h2 id="references">References</h2>

<ul>
<li><a href="https://covid19.isciii.es/">Situación COVID-19 España</a></li>
</ul></article><section class="article labels"><a class="category" href=/categories/blog/>blog</a><a class="tag" href=/tags/coronavirus/>coronavirus</a></section></div><section class="article navigation"><p><a class="link" href="/post/blog/2020-03-30-weekend_learnings/"><span class="li">&rarr;</span>2020-03-30 Weekend Learnings</a></p></section><script src="https://utteranc.es/client.js" repo="MetalBlueberry/MetalBlueberry.github.io" issue-term="og:title"
    label="comment" theme="github-light" crossorigin="anonymous" async>
    </script></div><section id="footer" class="footer"><div class="footer-wrap">
    <p class="copyright">Víctor Pérez Domingo</p>
    <p class="powerby"><span>Powered by </span><a href="https://gohugo.io" 
        target="_blank">Hugo</a><span> and the </span><a href="https://themes.gohugo.io/hugo-notepadium/" 
        target="_blank">Notepadium</a></p>
</div></section>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-150427130-1', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
</div>
</body>

</html>