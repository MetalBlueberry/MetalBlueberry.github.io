<!DOCTYPE html>
<html lang="en"><meta charset="utf-8"><meta name="generator" content="Hugo 0.73.0" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="color-scheme" content="light dark">
<meta name="supported-color-schemes" content="light dark"><title>2020-03-30 Weekend Learnings&nbsp;&ndash;&nbsp;MetalBlueberry</title><link rel="stylesheet" href="/css/core.min.5906bd043982b3c3160f1d6f645c469b205d2e02dc28379ce7195a8162f736bfc116a8c6c6924208a3d5dd1fb386c999.css" integrity="sha384-WQa9BDmCs8MWDx1vZFxGmyBdLgLcKDec5xlagWL3Nr/BFqjGxpJCCKPV3R&#43;zhsmZ"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="alternate icon" href="/favicon.ico">
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="2020-03-30 Weekend Learnings"/>
<meta name="twitter:description" content="I&rsquo;ve learned a little bit about frontend testing with chromium web drivers using Agouti and It has proven to be a really good option to write test in Go. Also we are in quarantine so I let you here a WebGL interactive animation to entertain you."/>

<meta property="og:title" content="2020-03-30 Weekend Learnings" />
<meta property="og:description" content="I&rsquo;ve learned a little bit about frontend testing with chromium web drivers using Agouti and It has proven to be a really good option to write test in Go. Also we are in quarantine so I let you here a WebGL interactive animation to entertain you." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://metalblueberry.github.io/post/blog/2020-03-30-weekend_learnings/" />
<meta property="article:published_time" content="2020-03-31T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-06-16T20:18:07+02:00" />

<meta name="author" content="MetalBlueberry">

<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
<body>
    <div class="base-body"><section id="header" class="site header">
    <div class="header wrap"><span class="header left-side"><a class="site home" href="/"><img class="site logo" src="/favicon.svg" alt /><span class="site name">MetalBlueberry</span></a></span>
        <span class="header right-side"><div class="nav wrap"><nav class="nav"><a class="nav item" href="/categories/">Categories</a><a class="nav item" href="/tags/">Tags</a><a class="nav item" href="/about">About</a><a class="nav item" href="/faq">F.A.Q.</a><a class="nav item" href="/social">Follow me</a></nav></div></span></div><div class="site slogan"><span class="title">A passionate programmer</span></div></section><div id="content"><div class="article-container"><section class="article header">
    <h1 class="article title">2020-03-30 Weekend Learnings</h1><p class="article date">March 31, 2020<span class="lastmod"> • edited June 16, 2020</span></p></section><article class="article markdown-body"><p>I&rsquo;ve learned a little bit about frontend testing with chromium web drivers using <a href="https://agouti.org/"target="_blank">Agouti</a> and It has proven to be a really good option to write test in Go. Also we are in quarantine so I let you here a WebGL interactive animation to entertain you.</p>
<h2 id="enjoy">Enjoy</h2>
 <iframe src="https://paveldogreat.github.io/WebGL-Fluid-Simulation/" style="width:100%; height:800px; border:none;"></iframe>
<h2 id="agouti">Agouti</h2>
<p><a href="https://agouti.org/"target="_blank">Agouti</a> is an universal WebDriver client for Go. I decided to use it because I&rsquo;m already familiar with Ginkgo and Gomega and I think that it covers my use case, Which is testing simple web applications and APIs from the same code.</p>
<p>You can get started with the Ginkgo cli by running the bootstrap command with the &ndash;agouti flag</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">ginkgo bootstrap --agouti
</code></pre></td></tr></table>
</div>
</div><p>This generates a bootstrap file with the following structure</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-go" data-lang="go"><span style="color:#ff79c6">package</span> Agouti_test

<span style="color:#ff79c6">import</span> (
	<span style="color:#f1fa8c">&#34;testing&#34;</span>

	. <span style="color:#f1fa8c">&#34;github.com/onsi/ginkgo&#34;</span>
	. <span style="color:#f1fa8c">&#34;github.com/onsi/gomega&#34;</span>
	<span style="color:#f1fa8c">&#34;github.com/sclevine/agouti&#34;</span>
)

<span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">TestAgouti</span>(t <span style="color:#ff79c6">*</span>testing.T) {
	<span style="color:#50fa7b">RegisterFailHandler</span>(Fail)
	<span style="color:#50fa7b">RunSpecs</span>(t, <span style="color:#f1fa8c">&#34;Agouti Suite&#34;</span>)
}

<span style="color:#8be9fd;font-style:italic">var</span> agoutiDriver <span style="color:#ff79c6">*</span>agouti.WebDriver

<span style="color:#8be9fd;font-style:italic">var</span> _ = <span style="color:#50fa7b">BeforeSuite</span>(<span style="color:#8be9fd;font-style:italic">func</span>() {
	<span style="color:#6272a4">// Choose a WebDriver:
</span><span style="color:#6272a4"></span>
	<span style="color:#6272a4">// agoutiDriver = agouti.PhantomJS()
</span><span style="color:#6272a4"></span>	<span style="color:#6272a4">// agoutiDriver = agouti.Selenium()
</span><span style="color:#6272a4"></span>	agoutiDriver = agouti.<span style="color:#50fa7b">ChromeDriver</span>()

	<span style="color:#50fa7b">Expect</span>(agoutiDriver.<span style="color:#50fa7b">Start</span>()).<span style="color:#50fa7b">To</span>(<span style="color:#50fa7b">Succeed</span>())
})

<span style="color:#8be9fd;font-style:italic">var</span> _ = <span style="color:#50fa7b">AfterSuite</span>(<span style="color:#8be9fd;font-style:italic">func</span>() {
	<span style="color:#50fa7b">Expect</span>(agoutiDriver.<span style="color:#50fa7b">Stop</span>()).<span style="color:#50fa7b">To</span>(<span style="color:#50fa7b">Succeed</span>())
})

</code></pre></td></tr></table>
</div>
</div><p>If you are familiar with Ginkgo, you will recognise everything in this file. It&rsquo;s self explanatory. You have to pay attention to the selected web driver. From my experience, ChromeDriver works well. I do not recommend <strong>PhantomJS as it is deprecated</strong>.</p>
<p>Now you are ready to start writing your own browser tests. Following the example in the official page, you can create the structure using ginkgo cli.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">ginkgo generate --agouti user_login
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-go" data-lang="go"><span style="color:#ff79c6">package</span> Agouti_test

<span style="color:#ff79c6">import</span> (
	. <span style="color:#f1fa8c">&#34;github.com/onsi/ginkgo&#34;</span>
	. <span style="color:#f1fa8c">&#34;github.com/onsi/gomega&#34;</span>
	<span style="color:#f1fa8c">&#34;github.com/sclevine/agouti&#34;</span>
	. <span style="color:#f1fa8c">&#34;github.com/sclevine/agouti/matchers&#34;</span>

	. <span style="color:#f1fa8c">&#34;UNKNOWN_PACKAGE_PATH&#34;</span>
)

<span style="color:#8be9fd;font-style:italic">var</span> _ = <span style="color:#50fa7b">Describe</span>(<span style="color:#f1fa8c">&#34;UserLogin&#34;</span>, <span style="color:#8be9fd;font-style:italic">func</span>() {
	<span style="color:#8be9fd;font-style:italic">var</span> page <span style="color:#ff79c6">*</span>agouti.Page

	<span style="color:#50fa7b">BeforeEach</span>(<span style="color:#8be9fd;font-style:italic">func</span>() {
		<span style="color:#8be9fd;font-style:italic">var</span> err <span style="color:#8be9fd">error</span>
		page, err = agoutiDriver.<span style="color:#50fa7b">NewPage</span>()
		<span style="color:#50fa7b">Expect</span>(err).<span style="color:#50fa7b">NotTo</span>(<span style="color:#50fa7b">HaveOccurred</span>())
	})

	<span style="color:#50fa7b">AfterEach</span>(<span style="color:#8be9fd;font-style:italic">func</span>() {
		<span style="color:#50fa7b">Expect</span>(page.<span style="color:#50fa7b">Destroy</span>()).<span style="color:#50fa7b">To</span>(<span style="color:#50fa7b">Succeed</span>())
	})
})
</code></pre></td></tr></table>
</div>
</div><p>I&rsquo;m not going to copy an paste everything from that page here. Just go to <a href="https://agouti.org/"target="_blank">Agouti</a> webpage and read the tutorial.</p>
<h2 id="genereate-a-portable-binary-test">Genereate a portable binary test</h2>
<p>This is the main reason why I&rsquo;ve chosen Go for writing test. I need to be able to write test and share them with other developers to execute it in their local environment. If you&rsquo;ve tried to share applications in Python, Java or other programming languages that require heavy environment setup, it&rsquo;s always annoying. With go, just give execution permissions and you are ready to Go.</p>
<p>To generate a binary from the current tests, you have to run the following command</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">go <span style="color:#8be9fd;font-style:italic">test</span> -c
<span style="color:#6272a4">#or</span>
ginkgo build
</code></pre></td></tr></table>
</div>
</div><p>This will generate a binary file, in my case Agouti.test, that you can run to have the same effect as running go test.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">./Agouti.test
</code></pre></td></tr></table>
</div>
</div><p>There is one missing feature for being able to really use this approach. Flags! You can easily add your own flags using the <code>init()</code> function. Here is an example of a flag to select the driver. You can easily extend this to add your own flags. The trick is to define all the flags in the <code>init()</code> section. Note that we are not calling <code>flag.Parse</code> because it is internally called.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-go" data-lang="go">
(<span style="color:#ff79c6">...</span>)

<span style="color:#8be9fd;font-style:italic">var</span> driverName <span style="color:#8be9fd">string</span>

<span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">init</span>() {
	flag.<span style="color:#50fa7b">StringVar</span>(<span style="color:#ff79c6">&amp;</span>driverName, <span style="color:#f1fa8c">&#34;driver&#34;</span>, <span style="color:#f1fa8c">&#34;chromedriver&#34;</span>, <span style="color:#f1fa8c">&#34;The driver to be used&#34;</span>)
}

(<span style="color:#ff79c6">...</span>)

<span style="color:#8be9fd;font-style:italic">var</span> _ = <span style="color:#50fa7b">BeforeSuite</span>(<span style="color:#8be9fd;font-style:italic">func</span>() {

	<span style="color:#6272a4">// Choose a WebDriver:
</span><span style="color:#6272a4"></span>	<span style="color:#ff79c6">switch</span> driverName {
	<span style="color:#ff79c6">case</span> <span style="color:#f1fa8c">&#34;chromedriver&#34;</span>:
		agoutiDriver = agouti.<span style="color:#50fa7b">ChromeDriver</span>()
	<span style="color:#ff79c6">case</span> <span style="color:#f1fa8c">&#34;selenium&#34;</span>:
		agoutiDriver = agouti.<span style="color:#50fa7b">Selenium</span>()
  <span style="color:#ff79c6">default</span>:
		<span style="color:#50fa7b">Fail</span>(<span style="color:#f1fa8c">&#34;Invalid driver&#34;</span>)
	}

	<span style="color:#50fa7b">Expect</span>(agoutiDriver.<span style="color:#50fa7b">Start</span>()).<span style="color:#50fa7b">To</span>(<span style="color:#50fa7b">Succeed</span>())
})

(<span style="color:#ff79c6">...</span>)
</code></pre></td></tr></table>
</div>
</div><p>Now you can run ginkgo with flags or the binary generated</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">ginkgo -- --driver selenium
./Agouti.test --driver selenium
</code></pre></td></tr></table>
</div>
</div><p>If you start the <code>Agouti.test</code> with &ndash;help. you will find that all the ginkgo/test flags are still there. Therefore you can do interesting things such as focus specs by pattern, enable verbose output or enabling fail fast.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Go + Ginkgo + Gomega + Agouti are perfect to write portable test suites that can be executed in any system. The next steps will be to add some API testing directly with Go http library and to try Agouti inside a docker container. I think that the docker container will just work inside this image <a href="https://hub.docker.com/r/robcherry/docker-chromedriver/">https://hub.docker.com/r/robcherry/docker-chromedriver/</a></p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://agouti.org/"target="_blank">Agouti</a></li>
<li><a href="https://github.com/PavelDoGreat/WebGL-Fluid-Simulation"target="_blank">Fluid simulation</a></li>
</ul></article><section class="article labels"><a class="category" href=/categories/blog/>blog</a><a class="tag" href=/tags/weekend/>weekend</a><a class="tag" href=/tags/testing/>testing</a><a class="tag" href=/tags/quality/>quality</a><a class="tag" href=/tags/go/>go</a></section></div><section class="article navigation"><p><a class="link" href="/post/blog/2020-04-06_coronavirus_trend_in_spain/"><span class="li">&larr;</span>Coronavirus Trend In Spain</a></p><p><a class="link" href="/post/howto/2020-03-11_use_git_to_track_git_versions/"><span class="li">&rarr;</span>Use Git to track Git versions</a></p></section><section class="article discussion"><script 
            src="https://utteranc.es/client.js" 
            repo="MetalBlueberry/MetalBlueberry.github.io"
            issue-term="og:title"
            label=""
            theme="github-light"
            crossorigin="anonymous" async>
        </script></section>
<div class="claps">
  <div class="canvas">
    <div id="totalCounter" class="total-counter"></div>

    <div id="clap" class="clap-container">
      <i class="clap-icon fa fa-hand-paper-o"></i>
    </div>

    <div id="clicker" class="click-counter">
      <span class="counter"></span>
    </div>

    <div id="sonar-clap" class="clap-container-sonar"></div>

    <div id="particles" class="particles-container">
      <div class="triangle">
        <div class="square"></div>
      </div>
      <div class="triangle">
        <div class="square"></div>
      </div>
      <div class="triangle">
        <div class="square"></div>
      </div>
      <div class="triangle">
        <div class="square"></div>
      </div>
      <div class="triangle">
        <div class="square"></div>
      </div>
    </div>

    <div id="particles-2" class="particles-container">
      <div class="triangle">
        <div class="square"></div>
      </div>
      <div class="triangle">
        <div class="square"></div>
      </div>
      <div class="triangle">
        <div class="square"></div>
      </div>
      <div class="triangle">
        <div class="square"></div>
      </div>
      <div class="triangle">
        <div class="square"></div>
      </div>
    </div>

    <div id="particles-3" class="particles-container">
      <div class="triangle">
        <div class="square"></div>
      </div>
      <div class="triangle">
        <div class="square"></div>
      </div>
      <div class="triangle">
        <div class="square"></div>
      </div>
      <div class="triangle">
        <div class="square"></div>
      </div>
      <div class="triangle">
        <div class="square"></div>
      </div>
    </div>

  </div>
</div><script>
  anchors.add();
</script></div><section id="footer" class="footer"><div class="footer-wrap">
    <p class="copyright">Víctor Pérez Domingo</p>
    <p class="powerby"><span>Powered by </span><a href="https://gohugo.io" 
        target="_blank">Hugo</a><span> and the </span><a href="https://themes.gohugo.io/hugo-notepadium/" 
        target="_blank">Notepadium</a></p>
</div></section><script defer type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha384-e/4/LvThKH1gwzXhdbY2AsjR3rm7LHWyhIG5C0jiRfn8AN2eTN5ILeztWw0H9jmN" crossorigin="anonymous"></script>
        <script
            type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });</script>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-150427130-1', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<script src="/js/core.min.6d58ae06d163dcf4ea5254fc7006ccd56745fa6fa5feb2b2e417538d70efb617823f575f338d25d3475ad418d50ae9b1.js" integrity="sha384-bViuBtFj3PTqUlT8cAbM1WdF&#43;m&#43;l/rKy5BdTjXDvtheCP1dfM40l00da1BjVCumx"></script></div>
</body>

</html>